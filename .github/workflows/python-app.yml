# This workflow will install Python dependencies, run tests and lint with a single version of Python
# For more information see: https://help.github.com/actions/language-and-framework-guides/using-python-with-github-actions

name: 检查测试用例

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Set up Python 3.9
      uses: actions/setup-python@v2
      with:
        python-version: 3.9
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install flake8 pytest
        if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
        python -m pip install pypinyin
        python -m pip install Pillow
        python -m pip install ubelt
        python -m pip install chardet
        python -m pip install python-dotenv

    - name: Test with pytest
      run: |
          python -m unittest pyefun.算数运算_test
          python -m unittest pyefun.数组操作_test
          python -m unittest pyefun.缓存操作_test
          python -m unittest pyefun.日期时间操作_test
          python -m unittest pyefun.类型转换_test
          #python -m unittest pyefun.commonlyUtil_test
          python -m unittest pyefun.实用函数_test
          python -m unittest pyefun.环境变量_test
          python -m unittest pyefun.配置项_test
          #python -m unittest pyefun.dirkBase_test 修改后依然无法在linux下测试
          python -m unittest pyefun.ewin32api_test
          python -m unittest pyefun.imageUtil_test
          python -m unittest pyefun.网络操作_test
          #python -m unittest pyefun.进程池池_test
          python -m unittest pyefun.进度显示_test
          python -m unittest pyefun.正则表达式_test
          python -m unittest pyefun.文本操作_test
          python -m unittest pyefun.文本操作实用函数_test
          python -m unittest pyefun.系统处理_test
          #python -m unittest pyefun.threadingUtil_test #有问题无法自动测试
          #python -m unittest pyefun.日期时间操作_test
          #python -m unittest pyefun.时钟_test
          python -m unittest pyefun.类型转换_test

